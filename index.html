<!DOCTYPE html>
<html lang="es">
<!--Nabigatzailean ondo joateko-->

<head>
    <title>Elorrieta</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="Itxura.css">
    <style>
        /* Estilo para la tabla */
        table {
            border-collapse: collapse;
            width: 100%;
        }

        th,
        td {
            border: 1px solid #dddddd;
            text-align: left;
            padding: 8px;
        }

        th {
            background-color: #f2f2f2;
        }
    </style>
</head>
<!--ikusten den osoa-->

<body>
    <!--Titulua eta logoa-->
    <header>
        <h1>Formulario</h1>
    </header>

    <main>
        <!--Todos los input type:
        1.-text: Permite al usuario introducir texto.
        2.-password: Similar al input de texto, pero oculta los caracteres que el usuario escribe (útil para contraseñas).
        3.-checkbox: Permite al usuario seleccionar una o más opciones entre varias.
        4.-radio: Permite al usuario seleccionar una opción entre varias, pero solo puede seleccionar una.
        5.-submit: Utilizado para enviar el formulario al servidor.
        6.-reset: Restablece todos los valores de los campos del formulario a sus valores iniciales.
        7.-button: Representa un botón que no realiza ninguna acción por defecto, pero se puede programar con JavaScript.
        8.-file: Permite al usuario seleccionar uno o más archivos para cargarlos al servidor.
        9.-hidden: Un campo oculto que no es visible para el usuario, pero puede ser enviado con el formulario.
        10.-image: Similar a submit, pero muestra una imagen en lugar de un botón.
        11.-date: Permite al usuario seleccionar una fecha.
        12.-email: Requiere que el usuario introduzca una dirección de correo electrónico válida.
        13.-number: Permite al usuario introducir un número.
        14.-range: Representa un control deslizante que permite al usuario seleccionar un valor numérico de un rango específico.
        15.-tel: Permite al usuario introducir un número de teléfono.
        16.-url: Requiere que el usuario introduzca una URL válida.
        -->

        <form>
            <fieldset>
                <legend>Formulario agregar a tabla</legend>
                <!--Select-->
                <select name="Zikloa" id="Zikloa">
                    <option value="SMR">SMR</option>
                    <option value="ASIR">ASIR</option>
                    <option value="DAM">DAM</option>
                    <option value="DAW">DAW</option>
                </select>

                <br>

                <!--Checkbox-->
                <input type="checkbox" id="1maila" name="1maila">
                <label for="1maila">1.maila</label>
                <input type="checkbox" id="2maila" name="2maila">
                <label for="2maila">2.maila</label>

                <br>

                <!--Radio-->
                <input type="radio" id="euskera" name="hizkuntza" value="euskera">
                <label for="euskera">Euskera</label>
                <input type="radio" id="gaztelania" name="hizkuntza" value="gaztelania">
                <label for="gaztelania">Gaztelania</label>

                <br>

                <!--Text-->
                <label for="galdera1">Galdera1</label>
                <input type="text" id="galdera1" name="galdera1">

                <br>

                <!--Button para agregar texto-->
                <button type="button" id="agregarTextoBtn" onclick="agregarTextoATabla()">Agregar Texto a la
                    Tabla</button>

                <!--Tabla para texto simple-->
                <table id="miTablaTexto">
                    <thead>
                        <tr>
                            <th>Texto Agregado</th>
                        </tr>
                    </thead>
                    <tbody id="tablaBodyTexto">
                    </tbody>
                </table>

                <!--Button para agregar datos-->
                <button type="button" id="agregarDatosBtn" onclick="agregarDatosATablas()">Agregar Datos a la
                    Tabla</button>

                <!--Tabla para datos compuestos-->
                <table id="miTablaDatos">
                    <thead>
                        <tr>
                            <th>Zikloa</th>
                            <th>Maila1</th>
                            <th>Maila2</th>
                            <th>Hizkuntza</th>
                            <th>Galdera1</th>
                        </tr>
                    </thead>
                    <tbody id="tablaBodyDatos">
                    </tbody>
                </table>

                <script>
                    // Función para agregar el texto a la tabla
                    function agregarTextoATabla() {
                        // Obtenemos el valor del input de texto
                        var texto = document.getElementById('galdera1').value;

                        // Creamos un elemento <tr> y <td> para el texto
                        var newRow = document.createElement('tr');
                        var newCell = document.createElement('td');
                        newCell.textContent = texto;

                        // Agregamos la celda al row
                        newRow.appendChild(newCell);

                        // Agregamos el row a la tabla
                        document.getElementById('tablaBodyTexto').appendChild(newRow);
                    }

                    // Función para agregar datos a la tabla
                    function agregarDatosATablas() {
                        var zikloa = document.getElementById('Zikloa').value;
                        var maila1 = document.getElementById('1maila').checked ? '1' : '0';
                        var maila2 = document.getElementById('2maila').checked ? '1' : '0';
                        var hizkuntza = document.getElementById('euskera').checked ? 'Euskera' : 'Gaztelania';
                        var galdera1 = document.getElementById('galdera1').value;

                        var newRow = document.createElement('tr');
                        var cellZikloa = document.createElement('td');
                        var cellMaila1 = document.createElement('td');
                        var cellMaila2 = document.createElement('td');
                        var cellHizkuntza = document.createElement('td');
                        var cellGaldera1 = document.createElement('td');

                        cellZikloa.textContent = zikloa;
                        cellMaila1.textContent = maila1;
                        cellMaila2.textContent = maila2;
                        cellHizkuntza.textContent = hizkuntza;
                        cellGaldera1.textContent = galdera1;

                        newRow.appendChild(cellZikloa);
                        newRow.appendChild(cellMaila1);
                        newRow.appendChild(cellMaila2);
                        newRow.appendChild(cellHizkuntza);
                        newRow.appendChild(cellGaldera1);

                        document.getElementById('tablaBodyDatos').appendChild(newRow);
                    }
                </script>
            </fieldset>

            <fieldset>
                <legend>Cambiar texto</legend>
                <label for="texto">Texto</label>
                <input type="text" id="texto" name="texto"><br>
                <button type="button" onclick="cambiarAMayusculas()">Cambiar a Mayúsculas</button>
                <button type="button" onclick="cambiarAMinusculas()">Cambiar a Minúsculas</button>

                <script>
                    function cambiarAMayusculas() {
                        var inputTexto = document.getElementById('texto');
                        var texto = inputTexto.value;
                        inputTexto.value = texto.toUpperCase();
                    }

                    function cambiarAMinusculas() {
                        var inputTexto = document.getElementById('texto');
                        var texto = inputTexto.value;
                        inputTexto.value = texto.toLowerCase();
                    }
                </script>
            </fieldset>

            <fieldset>
                <legend>Cambiar color</legend>
                <label for="color">Color:</label>
                <input type="text" id="color" name="color"><br>
                <button type="button" onclick="cambiarColorLetra()">Cambiar color letra</button>
                <button type="button" onclick="cambiarColorInput()">Cambiar color input</button>
                <button type="button" onclick="cambiarColorFondo()">Cambiar color fondo</button>

                <script>
                    function cambiarColorLetra() {
                        var color = document.getElementById('color').value;
                        var input = document.getElementById('color');
                        input.style.color = "red";
                    }

                    function cambiarColorInput() {
                        var color = document.getElementById('color').value;
                        var input = document.getElementById('color');
                        input.style.backgroundColor = "red";
                    }

                    function cambiarColorFondo() {
                        var color = document.getElementById('color').value;
                        document.body.style.backgroundColor = "red";
                    }
                </script>
            </fieldset>

            <fieldset>
                <legend>Primer Formulario</legend>
                <label for="nombre">Nombre:</label><br>
                <input type="text" id="nombre" name="nombre"><br>
                <label for="apellido">Apellido:</label><br>
                <input type="text" id="apellido" name="apellido"><br>
                <label for="correo">Correo:</label><br>
                <input type="email" id="correo" name="correo"><br>
                <label for="NAN">DNI:</label><br>
                <input type="text" id="NAN" name="NAN"><br>
                <button type="button" onclick="validarFormulario()">Enviar</button>

                <script>
                    function validarFormulario() {
                        var NAN = document.getElementById('NAN').value;
                        // Verificar si el NAN tiene 9 caracteres (8 números y 1 letra)
                        if (NAN.length !== 9) {
                            alert('El NAN debe tener 8 dígitos numéricos seguidos de una letra.');
                        } else {
                            var numeros = NAN.substring(0, 8); // Obtener los primeros 8 caracteres (números)
                            var letra = NAN.substring(8).toUpperCase(); // Obtener el último carácter (letra) y convertirla a mayúsculas
                            if (isNaN(numeros) || !/^[A-Z]$/.test(letra)) {
                                alert('El NAN debe tener 8 dígitos numéricos seguidos de una letra.');
                            } else {
                                alert('El NAN es válido.');
                                // Aquí puedes enviar el formulario si es necesario
                            }
                        }
                    }
                </script>
            </fieldset>

            <fieldset>
                <legend>Bigarren eskuko erropa denda: kobratze kutxa</legend>
                <label for="zbkia">Erosketa Zbkia: </label>
                <input type="text" name="zbkia" id="zbkia" value="1" disabled>
                <br>
                <label for="bez">BEZ: % </label>
                <input type="number" id="bez" name="bez" value="21" readonly>
                <br>
                <label for="produktua">Produktua: </label>
                <select id="produktua" name="produktua">
                    <option value="15.3">Gona</option>
                    <option value="10.2">Prakak</option>
                    <option value="5.45">Kamiseta</option>
                    <option value="20.9">Jaka</option>
                    <option value="5.4">Lepokoa</option>
                    <option value="25.8">Zapatak</option>
                    <option value="35.3">Berokia</option>
                    <option value="15.2">Aterkia</option>
                </select>
                <label for="kopurua">Kopurua: </label>
                <input type="number" id="kopurua" name="kopurua" value="1">
                <br>
                <input type="button" value="Gorde" onclick="gorde()">
                <br>
                <label>Tiketa:</label>
                <br>
                <textarea id="tiketa" cols="100" rows="10" placeholder="Gordetako erosketak" disabled></textarea>
                <br>
                <input type="button" value="Sortu Faktura" onclick="faktura()">

                <script>
                    //FUNTZIO BIETAN BEHARKO DITUGUN ALDAGAIAK

                    let zbkia = document.getElementById("zbkia");//Fakturan, lerro bakoitzak izango duen zenbakia da. 
                    let bez = document.getElementById("bez");
                    let produktua = document.getElementById("produktua");
                    let kopurua = document.getElementById("kopurua");
                    let tiketa = document.getElementById("tiketa");

                    let lista = new Set(); // edozein motatako balio bakarrak gordetzeko balio duen objektua


                    // AUKERATZEN DEN ARTIKULU BAKOITZA
                    function gorde() {
                        //Lehenengo artikulua aukeratzen denean, goiburua idatzi behar da. 
                        if (zbkia.value == 1) {
                            tiketa.innerHTML = "Zbkia\tProduktua\tKopurua\tSalneurria\tZenbatekoa";
                        }

                        let artikulua = produktua.options[produktua.selectedIndex].text;

                        // Objektu bat definitzen da, akeratzen diren artikulu guztiak gordetzeko balio du, ondoren fakturara errez eraman ahal izateko. 
                        // Objektua sortzearekin batera balioak esleitzen dizkiot.
                        let obj = {
                            zbkia: zbkia.value,
                            produktua: artikulua,
                            kopurua: kopurua.value,
                            prezioa: produktua.value
                        };
                        lista.add(obj); //Lista aldagai globala da, ondoren faktura funtzioak erregistratu diren datu guztiak gorde ahalko ditu.


                        tiketa.innerHTML += "\n" + zbkia.value + "\t" + artikulua + (artikulua == "Kamiseta" ? "\t" : "\t\t") + kopurua.value + "\t" + produktua.value + "\t\t" + (produktua.value * kopurua.value).toFixed(2);
                        zbkia.value++;
                    }

                    // FAKTURA SORTUKO DA ARTIKULU GUZTIAK AUKERATU ONDOREN
                    function faktura() {

                        let totala = 0;
                        let table = document.getElementById("taula");
                        let gorputza;

                        // Taula sortzeko JS kodea. Beti izango da berdina. Posiblea zen taula aldez aurretik sortuta egotea eta hemen erakustea, besterik ez. 
                        if (table) {
                            gorputza = table.tBodies[0];
                            gorputza.innerHTML = "";
                        } else {
                            table = document.createElement("table");
                            document.body.appendChild(table);
                            table.setAttribute("id", "taula");
                            table.style.border = "1px solid black";
                            let head = table.createTHead();
                            let row = head.insertRow();
                            let cell = row.insertCell();
                            cell.outerHTML = "<th>Zbkia</th>";//cell.innerHTML jarriko bagenu, txertatuko genuke <td> barruan Zbkia edukia. OuterHTML-rekin gainidazten dugu <th> etiketa <td> etiketa gainean
                            cell = row.insertCell();
                            cell.outerHTML = "<th>Produktua</th>";
                            cell = row.insertCell();
                            cell.outerHTML = "<th>Kopurua</th>";
                            cell = row.insertCell();
                            cell.outerHTML = "<th>Salneurria</th>";
                            cell = row.insertCell();
                            cell.outerHTML = "<th>Zenbatekoa</th>";
                            gorputza = table.createTBody();
                        }

                        // Foreach egituraren antzekoa. Objektu baten balioak errekorritzeko balio duen egitura: for .. of ..
                        for (let obj of lista) {
                            let prezioa = (obj.prezioa * obj.kopurua).toFixed(2);
                            totala += parseFloat(prezioa);
                            let row = gorputza.insertRow();
                            let cell = row.insertCell();
                            cell.innerHTML = obj.zbkia;
                            cell = row.insertCell();
                            cell.innerHTML = obj.produktua;
                            cell = row.insertCell();
                            cell.innerHTML = obj.kopurua;
                            cell = row.insertCell();
                            cell.innerHTML = obj.prezioa;
                            cell = row.insertCell();
                            cell.innerHTML = prezioa;
                            tr = document.createElement("tr");
                        }

                        // Fakturaren emaitza finala kalkulatzeko
                        let bezValue = (totala * bez.value / 100).toFixed(2);
                        let row = gorputza.insertRow();
                        let cell = row.insertCell();
                        cell = row.insertCell();
                        cell = row.insertCell();
                        cell = row.insertCell();
                        cell.outerHTML = "<th>BEZ</th>";
                        cell = row.insertCell();
                        cell.innerHTML = bezValue;
                        row = gorputza.insertRow();
                        cell = row.insertCell();
                        cell = row.insertCell();
                        cell = row.insertCell();
                        cell = row.insertCell();
                        cell.outerHTML = "<th>Guztira</th>";
                        cell = row.insertCell();
                        cell.innerHTML = totala.toFixed(2);

                    }
                </script>
            </fieldset>
        </form>

    </main>


</body>

</html>